(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{36273:function(e,t,n){Promise.resolve().then(n.bind(n,16727)),Promise.resolve().then(n.bind(n,81686)),Promise.resolve().then(n.t.bind(n,63744,23)),Promise.resolve().then(n.t.bind(n,12693,23)),Promise.resolve().then(n.t.bind(n,36913,23)),Promise.resolve().then(n.t.bind(n,41412,23))},16727:function(e,t,n){"use strict";n.r(t),n.d(t,{Scripts:function(){return o}});var a=n(91674),r=n(54603),s=n(56118);let o=()=>{let e=(0,r.usePathname)(),t=null==e?void 0:e.includes("/cart");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default,{id:"google-tag-manager",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:"\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer','".concat(t?"GTM-5LZKKD6R":"GTM-P5NM2X7","');\n          ")}}),(0,a.jsx)(s.default,{async:!0,src:"https://player.pandavideo.com.br/api.v2.js"}),(0,a.jsx)(s.default,{async:!0,src:"//assets.mediadelivery.net/playerjs/player-0.1.0.min.js"}),(0,a.jsx)(s.default,{id:"segment",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:'\n          !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="0soWzAwWV7hFmERH95vDdvzeGoCp2TkY";;analytics.SNIPPET_VERSION="4.15.3";\n          analytics.load("'.concat("2zGq44p5zs2pfBs17HIKbDrSawodREUq",'");\n          analytics.page();\n          }}();\n    ')}})]})}},81686:function(e,t,n){"use strict";n.r(t),n.d(t,{GlobalProviders:function(){return y}});var a=n(91674),r=n(50333),s=n(7346),o=n(17498),i=n(43700),c=n(79823),l=n(7936),d=n(69527);let u=new o.S({queryCache:new i.t({}),defaultOptions:{queries:{staleTime:6e4}}}),f=[{component:e=>{let{children:t}=e;return(0,a.jsx)(c.QueryClientProvider,{client:u,children:(0,a.jsxs)(d.V,{children:[t,(0,a.jsx)(l.t,{initialIsOpen:!1,position:"bottom"})]})})}},{component:r.Toast.Provider},{component:r.Tooltip.Provider,props:{delayDuration:200}},{component:s.Ho}],v=e=>{let{providers:t=[],children:n}=e;return t.reduceRight((e,t)=>{let{component:n,props:r={}}=t;return(0,a.jsx)(n,{...r,children:e})},n)},y=e=>{let{children:t}=e;return(0,a.jsx)(v,{providers:f,children:t})}},7346:function(e,t,n){"use strict";n.d(t,{Ho:function(){return m},e6:function(){return p},aC:function(){return _}});var a=n(91674),r=n(86655),s=n(50333),o=n(6194),i=n(80893),c=n(32510),l=n(4993),d=n(44434);let u=new Date,f={path:"/",secure:!0,expires:new Date(u.setMonth(u.getMonth()+1))},v=(e,t)=>{var n,a;let{data:r}=e;if(t&&"function"==typeof t){let n=t(e);if(n)return s.toast.danger({title:n})}if(Array.isArray(r)&&r.length)return r.forEach(e=>{e.message&&s.toast.danger({title:e.message})});let o=null!==(a=null==r?void 0:null===(n=r.error)||void 0===n?void 0:n.message)&&void 0!==a?a:"Erro interno do servidor";return s.toast.danger({title:o})};var y=n(99164);let h=(0,r.createContext)({});function p(){(0,c.oU)(void 0,"skylab_next_access_token_v3",f),(0,c.oU)(void 0,"skylab_next_refresh_token_v3",f),(0,c.oU)(void 0,"skylab_login_as",f)}let m=e=>{let{children:t}=e,{isConnected:n,subscribeToChannel:u}=(0,y.r)(),[m,_]=(0,r.useState)(!0),[k,g]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),x=(0,r.useRef)(!1),j=!!k,E=!!((null==k?void 0:k.createdAt)&&(0,o.Z)((0,i.Z)(new Date(k.createdAt)),new Date(2023,11,5,23,59,59))),P=(0,r.useCallback)(function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];p(),e&&(window.location.href="/?logout=true")},[]),S=(0,r.useCallback)(async()=>{let{skylab_next_access_token_v3:e,skylab_next_refresh_token_v3:t}=(0,c.jl)();if(!e||!t){_(!1);return}l.h.defaults.headers.Authorization="Bearer ".concat(e),w(e);try{let e=await l.h.get("/account");g(e.data),_(!1)}catch(e){P()}},[P]),C=(0,r.useCallback)(async(e,t)=>{try{let{data:{token:n,refreshToken:a}}=await l.h.post("sessions",{email:e,password:t});(0,c.d8)(void 0,"skylab_next_access_token_v3",n,f),(0,c.d8)(void 0,"skylab_next_refresh_token_v3",a,f)}catch(e){throw v((null==e?void 0:e.response)||""),Error()}},[]),T=(0,r.useCallback)(async(e,t)=>{try{let{data:{token:n,refreshToken:a}}=await l.h.post("/v2/registration/verify",{code:t,email:e});(0,c.d8)(void 0,"skylab_next_access_token_v3",n,f),(0,c.d8)(void 0,"skylab_next_refresh_token_v3",a,f),_(!0),S()}catch(e){throw v((null==e?void 0:e.response)||""),Error()}},[S]),A=(0,r.useCallback)(async e=>{try{let{data:{token:t,refreshToken:n}}=await l.h.get("/v2/github/callback?code=".concat(e));(0,c.d8)(void 0,"skylab_next_access_token_v3",t,f),(0,c.d8)(void 0,"skylab_next_refresh_token_v3",n,f)}catch(e){throw v((null==e?void 0:e.response)||""),Error()}},[]);(0,r.useEffect)(()=>{S()},[S]),(0,r.useEffect)(()=>{k&&j&&!x.current&&((0,d.R)({userId:k.id,name:k.name,email:k.email}),x.current=!0)},[j,k]),(0,r.useEffect)(()=>{k&&n&&u("user:".concat(k.id)).then(e=>{e.on("logout",e=>{let{forced:t=!1}=e;t||s.toast.danger({title:"Sua conta foi acessada em outro navegador."}),P()})})},[k,n,u,P]);let D=(0,r.useMemo)(()=>({isAuthenticated:j,isRecoveringUserSession:m,isNewUser:E,user:k,setUser:g,signIn:C,signInVerify:T,signInGithub:A,signOut:P,jwtToken:b,recoverUserSession:S}),[j,m,E,k,C,T,A,P,b,S]);return(0,a.jsx)(h.Provider,{value:D,children:t})};function _(){return(0,r.useContext)(h)}},99164:function(e,t,n){"use strict";let a;n.d(t,{r:function(){return o}});var r=n(86655),s=n(32510);function o(){let[e,t]=(0,r.useState)(!1),o=(0,r.useCallback)(async()=>{a=(await n.e(1808).then(n.t.bind(n,71808,23)))("".concat("wss","://").concat("skylab-api.rocketseat.com.br"),{reconnectionAttempts:15});let{skylab_next_access_token_v3:e}=(0,s.jl)();e&&a.withApiToken(e),a.connect(),a.on("open",()=>{t(!0)}),a.on("close",e=>{"terminated"!==e._connectionState&&t(!1)})},[]),i=(0,r.useCallback)(async e=>{a||await o();let t=a.getSubscription(e);return t||(t=a.subscribe(e)),t},[o]);return{isConnected:e,connectToWebsocket:o,subscribeToChannel:i}}},4993:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});let a=(0,n(29073).R)()},29073:function(e,t,n){"use strict";n.d(t,{R:function(){return u}});var a=n(89099),r=n.n(a),s=n(32510),o=n(7346);let i=!1,c=[],l=new Date,d=new Date(l.setMonth(l.getMonth()+1));function u(e){let t=(0,s.jl)(e),n=r().create({baseURL:"https://skylab-api.rocketseat.com.br",headers:{Authorization:"Bearer ".concat(t.skylab_next_access_token_v3)}});return n.interceptors.response.use(e=>e,a=>{var r,l,u,f;if((null===(r=a.response)||void 0===r?void 0:r.status)===401){if("error"in(null===(l=a.response)||void 0===l?void 0:l.data));else if(null===(f=a.response)||void 0===f?void 0:null===(u=f.data)||void 0===u?void 0:u.startsWith("E_JWT_TOKEN_EXPIRED")){let{skylab_next_refresh_token_v3:r}=t=(0,s.jl)(e),l=a.config;return i||(i=!0,n.post("/sessions/refresh",{refreshToken:r}).then(t=>{let{token:a}=t.data,r={path:"/",secure:!0,expires:d};(0,s.d8)(e,"skylab_next_access_token_v3",a,r),(0,s.d8)(e,"skylab_next_refresh_token_v3",t.data.refreshToken,r),n.defaults.headers.Authorization="Bearer ".concat(a),c.forEach(e=>e.onSuccess(a)),c=[]}).catch(e=>{c.forEach(t=>t.onFailure(e)),c=[],(0,o.e6)()}).finally(()=>{i=!1})),new Promise((e,t)=>{c.push({onSuccess:t=>{l.headers.Authorization="Bearer ".concat(t),e(n(l))},onFailure:e=>{t(e)}})})}else(0,o.e6)()}return Promise.reject(a)}),n}},44434:function(e,t,n){"use strict";let a;n.d(t,{I:function(){return s.a},R:function(){return o}});var r=n(21934),s=n.n(r);async function o(e){let{userId:t,name:r,email:s}=e;a?(a.identify(t),a.people.set({$name:r,$email:s,client:"next"})):(a=await Promise.resolve().then(n.t.bind(n,21934,23))).init("dcd1a0bcd016c8755ab3fd5ecb19a45e",{track_pageview:!0,loaded:e=>{e.identify(t),e.people.set({$name:r,$email:s,client:"next"})}})}s().init("dcd1a0bcd016c8755ab3fd5ecb19a45e",{track_pageview:!0})},63744:function(){},12693:function(){}},function(e){e.O(0,[1203,7120,1112,5955,2586,1898,7229,878,35,333,5933,1293,9997,1744],function(){return e(e.s=36273)}),_N_E=e.O()}]);